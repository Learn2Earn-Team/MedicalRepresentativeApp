{"version":3,"file":"src_app_pages_aproval-dcr_aproval-dcr_module_ts.js","mappings":"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","sources":["./src/app/pages/aproval-dcr/aproval-dcr-routing.module.ts","./src/app/pages/aproval-dcr/aproval-dcr.module.ts","./src/app/pages/aproval-dcr/aproval-dcr.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { AprovalDcrPage } from './aproval-dcr.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AprovalDcrPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class AprovalDcrPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AprovalDcrPageRoutingModule } from './aproval-dcr-routing.module';\n\nimport { AprovalDcrPage } from './aproval-dcr.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    AprovalDcrPageRoutingModule\n  ],\n  declarations: [AprovalDcrPage]\n})\nexport class AprovalDcrPageModule {}\n","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { ApicallService } from 'src/app/services/apicall.service';\r\nimport { GlobalService } from 'src/app/services/global.service';\r\nimport { ModelPage } from '../model/model.page';\r\nimport { format, parseISO } from 'date-fns';\r\nimport { ExcelService } from 'src/app/services/excel.service';\r\nimport * as XLSX from 'xlsx';\r\nimport { File } from '@ionic-native/file/ngx';\r\n\r\n\r\n@Component({\r\n  selector: 'app-aproval-dcr',\r\n  templateUrl: './aproval-dcr.page.html',\r\n  styleUrls: ['./aproval-dcr.page.scss'],\r\n})\r\nexport class AprovalDcrPage implements OnInit {\r\n\r\n  public mrlist : any = ['Dr.Nae1' , 'Dr.Name2' , 'Dr.Name3' , 'Dr.Name4' , 'Dr.Name5']\r\n  public allMR : any ;\r\n  public dcrdata : any = {mr_id:'', date:''}\r\n  public updatedcrData : any = {dcr_id:'', dcr_status:''}\r\n  public alldcrData: any;\r\n  public type: any = \"dcr\";\r\n  public dcrreport : any = {mr_id:'', month:'', year:''}\r\n public alldcrReport: any = [];\r\n public totalmonthlyCall: any = [];\r\n public totalmonthlymissedCall: any = [];\r\n public all_data:any = [];\r\n  all_data2: any;\r\n public monthName: any;\r\n public mrName: any;\r\n public totalAvg: any = [];\r\n  constructor(public global:GlobalService ,public excel:ExcelService, public apicall : ApicallService, public modalController: ModalController,) { }\r\n\r\n  ngOnInit() {\r\n    this.getmrData();\r\n  }\r\n\r\n  async getmrData(){\r\n    await this.apicall.api_getgetActive_mr();\r\n     this.global.GetallActive_mr.subscribe(res =>{\r\n       this.allMR = res;\r\n     })\r\n   }\r\n   async get_date(event){\r\n    console.log(event.target.value);\r\n    this.dcrdata.date = event.target.value;\r\n   }\r\n   async selectMR(event){\r\n    console.log(event.target.value);\r\n    this.dcrdata.mr_id = event.target.value;\r\n    await this.apicall.api_getdcrdetails(this.dcrdata);\r\n    this.global.Dcrdata.subscribe(res=>{\r\n           console.log(res);\r\n           this.alldcrData = res;\r\n           console.log(this.alldcrData);\r\n    });\r\n   }\r\n\r\n  async aprove(item){\r\n    console.log(item);\r\n      this.updatedcrData.dcr_id = item;\r\n      this.updatedcrData.dcr_status = \"approve\";\r\n      console.log(this.updatedcrData);\r\n   await this.apicall.api_updatedcrstatus(this.updatedcrData);\r\n   await this.apicall.api_getdcrdetails(this.dcrdata);\r\n   this.global.Dcrdata.subscribe(res=>{\r\n          console.log(res);\r\n          this.alldcrData = res;\r\n          console.log(this.alldcrData);\r\n   });\r\n   }\r\n  async reject(item){\r\n    console.log(item);\r\n      this.updatedcrData.dcr_id = item;\r\n      this.updatedcrData.dcr_status = \"reject\";\r\n      console.log(this.updatedcrData);\r\n   await this.apicall.api_updatedcrstatus(this.updatedcrData);\r\n   await this.apicall.api_getdcrdetails(this.dcrdata);\r\n   this.global.Dcrdata.subscribe(res=>{\r\n          console.log(res);\r\n          this.alldcrData = res;\r\n          console.log(this.alldcrData);\r\n   });\r\n   }\r\n\r\n   async seeProduct(dcr_id) {\r\n    console.log(dcr_id);\r\n    const modal = await this.modalController.create({\r\n      component: ModelPage,\r\n      cssClass: 'modalclass',\r\n      componentProps: {\r\n        dcr_id,\r\n        \"Category\": \"seedcrproduct\"\r\n      },\r\n      initialBreakpoint: 0.5,\r\n      breakpoints: [0.25, 0.5, 1]\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n\r\n  get_month(event){\r\n    console.log(event.target.value)\r\n    this.monthName = format(parseISO(event.target.value), 'MMMM-yyyy');\r\n    console.log(this.monthName);\r\n    var Value=event.target.value.split(\"-\");\r\n    var year = Value[0];\r\n    var month = Value[1];\r\n    this.dcrreport.month = month;\r\n    this.dcrreport.year = year;\r\n    console.log(month, year);\r\n   }\r\n\r\n  async select_MR(event){\r\n    for(let i = this.all_data.length - 1; i >= 0; i--) {\r\n      this.all_data.splice(i, 1);\r\n      console.log(this.all_data);\r\n    }\r\n    console.log(this.all_data);\r\n    console.log(event.target.value);\r\n    this.mrName = event.target.value.data.name;\r\n    this.dcrreport.mr_id = event.target.value.id;\r\n    console.log(this.dcrreport)\r\n    await this.apicall.api_getdcrmonthvise(this.dcrreport);\r\n    this.global.Storedcrmonthvise.subscribe(res=>{\r\n           console.log(res);\r\n          //  this.all_data = res;\r\n           this.alldcrReport = res[0];\r\n           this.totalmonthlyCall = res[1][0];\r\n           this.totalmonthlymissedCall = res[2][0];\r\n           this.totalAvg = res[3][0];\r\n           this.all_data = [].concat(this.alldcrReport, this.totalmonthlyCall, this.totalmonthlymissedCall, this.totalAvg);\r\n           console.log(this.all_data);\r\n           console.log(this.alldcrReport);\r\n    });\r\n\r\n   }\r\n   \r\n   exportToExcel() {\r\n    const x =  '' + this.monthName +' '+ 'DCR Report'\r\n    console.log(x);\r\n    this.excel.exportToExcel(this.all_data, x);\r\n    for(let i = this.all_data.length - 1; i >= 0; i--) {\r\n      this.all_data.splice(i, 1);\r\n      console.log(this.all_data);\r\n    }\r\n      console.log(this.all_data);\r\n      console.log('Export');\r\n    } \r\n\r\n    changeSegment() {\r\n      // for(let i = this.all_data.length - 1; i >= 0; i--) {\r\n      //   this.all_data.splice(i, 1);\r\n      //   console.log(this.all_data);\r\n      // }\r\n      //   console.log(this.all_data);\r\n      this.getmrData();\r\n    // for(let i=0; i<this.all_data.length; i++) {\r\n    //   this.all_data.pop();\r\n    //   console.log(this.all_data);\r\n    // }\r\n    // console.log(this.all_data);\r\n    }\r\n\r\n\r\n\r\n\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}